---
layout: post
title: 日志
date: 2018-07-09 00:00:00
categories: 计算机
tags: 多线程 
comments: 1
---



该篇是对日志的系统的初步思考。



首先讲述一下公司的日志系统是如何的一个情况。

<br>

日志文件的格式为："项目名.log"

1）数据记录

- 时间
- 错误等级
- 操作的类
- 数据

2）异常记录

- 1）的基础上添加异常栈

<br>

在数据库存储的时候，常常做的操作是增删改查（crud），而当我们对这些操作进行工程化后，其实不启动日志记录亦可。



而当我们仍旧没进行工程化的时候，就往往面临着重复做这些繁杂的操作，而且需要对这些繁杂的操作进行日志处理。

> 数据进入==》数据转换==》ORM化的CRUD

当我们这样分开进行处理时，日志系统只需要对数据转换的前后的数据进行记录即可。

<br>

而在基础设施ORM化的CRUD这一阶段，我们需要进行数据的前后设置，以供日后debug。在这当中会碰到一些问题。

问题1）表具有外键时，该如何进行记录？

当user和table1的关系是1：1时，删除user时，table1也会被级联删除。那么数据该怎么记录呢？

1. 级联删除的实现交给数据库。
   那么删除user时候，就不得不先查询user的数据，然后查询table1的数据，最后进行记录。

2. 通过java实现级联删除的实现

   那么删除user时候，userDeleteBiz就会查询user数据，table1DeleteBiz就会查询table1的数据，分开进行记录。





----













不足点：

1. 多线程的支持
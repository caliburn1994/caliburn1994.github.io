---
layout: post
title: 继承和组合
date: 2018-07-05 00:00:00
categories: 计算机
tags: 设计思想
comments: 1
---



这是关于继承(inheritance)和组合(composition)的个人理解。





##### 介绍

对于代码的重用，常见有继承和组合。

继承和组合其实质也是调用。而区别在于被动和主动。继承是根据某种规则进行调用，而组合是由程序员手动进行调用，也可以理解为手动编写规则。





##### 探讨



传统论述：

一） 子类可以覆盖父类public方法 , 所以继承有隐患 ( X )

```java
public class Parent{
    
    public void method(){
     //...   
    }
}

public class Child extend Parent{
    
    @override
    public void method(){
        
    }
}

```

**继承不应该这样用。**

因为类的内部方法和方法间可能存在依赖，如果直接覆盖public方法，可能会破坏方法间的依赖，从而导致bug出现。

从这个角度看，得到两点思考

1. 代码写好尽量不要改动。而覆盖这是一种改动，可能这种改动没有被触发。
2. 面向对象最小颗粒是对象/类，如果我们想要覆盖public方法而没有隐患的话，就不得不将最小颗粒度变为方法，并编写符合这个颗粒度的代码规则。这样一来就不再是面向对象的编程了。



结论 ：所以**继承只能用于扩展**。

PS：扩展这种行为的对象和主体关系很单一，所以十分适合继承。



二）组合满足了最小颗粒度为对象/类

上文有讲述到，面向对象的最小颗粒度是对象/类，因而为了达到上述的无隐患（无侵入）的覆盖，我们就应该使用组合。

将可能被覆盖的内容以及可能用于覆盖的内容提取出来，成为第三方，进行组合（插入）。这种思路将有可能出现隐患的代码分离出来，它们的地位变成一致的，不存在被覆盖和覆盖，从而避免了除错的可能性。

结论：通过组合实现复用。










---
layout: post
title: docker实践记录
categories: 计算机
tags: 笔记
comments: 1
---





docker操作的记录。没有太多参考意义。

本次操作的环境:

> Client:
>  Version:	18.03.0-ce
>  API version:	1.37
>  Go version:	go1.9.4
>  Git commit:	0520e24
>  Built:	Wed Mar 21 23:10:01 2018
>  OS/Arch:	linux/amd64
>  Experimental:	false
>  Orchestrator:	swarm
>
> Server:
>  Engine:
>   Version:	18.03.0-ce
>   API version:	1.37 (minimum version 1.12)
>   Go version:	go1.9.4
>   Git commit:	0520e24
>   Built:	Wed Mar 21 23:08:31 2018
>   OS/Arch:	linux/amd64
>   Experimental:	false





# 1.去除sudo

1)

```bash
#添加用户组
sudo groupadd docker  
#添加当前用户进入组里
sudo gpasswd -a xiaojie docker
```

[gpasswd命令 ](http://man.linuxde.net/gpasswd)   -a 添加 (add)

2) 重新启动







# 2. 通过Dockerfile运行

1)新建Dockerfile文件

```bash
From node #基本镜像
MAINTAINER caliburn1994@foxmail.com#维护者
#代码地址
#-q == --quiet 出错也不报告 (我也不懂为什么要这样加)
RUN git clone -q https://github.com/docker-in-practice/todo.git
#放置位置
WORKDIR todo
#运行命令
RUN npm install > /dev/null
#开放端口
EXPOSE 8000
CMD ["npm","start"]
```

2)根据dockerFIle执行构建

```bash
docker build .
```



3)重命名

```bash
#重命名
#todoapp是名字 (类似)
docker tag ID号 todoapp
```



4)第一次运行代码

```bash
docker run -p 8000:8000 --name  example1 todoapp
#-p ==>port 主机(宿主)端口:容器端口
#--example1="todoapp": 为容器指定一个名称；
#todoapp为镜像
```

[Docker run 命令](http://www.runoob.com/docker/docker-run-command.html)



5)停止运行容器

[docker attach | Docker Documentation](https://docs.docker.com/engine/reference/commandline/attach/)

> To stop a **container**, use CTRL-c . 







6) 第二次运行

```bash
#查看容器状态,查看停止否
#ps == Process Status
docker ps -a
#后台运行
 docker start example1
#查看运行否
docker ps -a 
```

参考: [docker run 与docker start的区别](https://www.wangminli.com/?p=1184)



7)查看被影响

```bash
#查看容器中文件哪些被影响了
docker diff example1
```



# 3.通过网络访问docker server

1)服务端

```bash
#-H ==>host 主机
#-H unix:///var/run/docker.sock  本地也可以访问
dockerd -H tcp://0.0.0.:2375 -H unix:///var/run/docker.sock
```

dockerd 全称docker daemon。docker守护进程，真正执行者。

2)客户端

```bash
docker -H tcp://0.0.0.:2375
```





```
#查看IP...
ifconfig
```
















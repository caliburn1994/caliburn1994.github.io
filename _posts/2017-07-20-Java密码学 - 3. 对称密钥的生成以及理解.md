---
layout: post
title: Java密码学 - 3. 对称密钥的生成以及理解
date: 2017-07-20 00:06:18
categories: 计算机
tags: 安全 
comments: 1
typora-root-url: ..
---


本篇为对称密钥的生成的代码，以及笔者的理解。

<br>

##### 原理

原文+密钥key+算法=密文 （[传送门](https://docs.aws.amazon.com/zh_cn/kms/latest/developerguide/crypto_overview.html)）

![Image result for Symmetric-key algorithm](/assets/blog_res/Symmetric_Key_Encryption_sm.png)

<br>

##### **代码实现**

实现1

```java
//自定义密钥
String password="";
SecretKeySpec secretKeySpec=new SecretKeySpec(password.getBytes(),"算法名称");
```
实现2

```java
//随机密钥
KeyGenerator keygenerator  = KeyGenerator.getInstance("DES");
SecretKey secretKey = keygenerator.generateKey();
```

<br>

##### **理解**

**javax.crypto.spec.SecretKeySpec**

[SecretKeySpec](https://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/SecretKeySpec.html)继承了[KeySpec](https://docs.oracle.com/javase/7/docs/api/java/security/spec/KeySpec.html)接口和[SecretKey。](https://docs.oracle.com/javase/7/docs/api/javax/crypto/SecretKey.html)

文档解释KeySpec是：

> A (transparent) specification of the key material that constitutes a cryptographic key.
>
> 这是一个密钥材料的规范，用于构成加密密钥。

把SecretKeySpec比喻成数据包的话，**KeySpec**就是当中的各种协议，而**key和secretkey**就是数据。

<br>

##### 延申

**SecretKey**有以下方法

1. getAlgorithm 算法名称 ([`getAlgorithm`](https://docs.oracle.com/javase/7/docs/api/java/security/Key.html#getAlgorithm())提供密钥的参考)
2. getEncoded  (丢个[传送门](https://docs.oracle.com/javase/7/docs/api/java/security/Key.html)， 编码格式，用于传输时用)
3. getFormat 规范格式 (Encoded是返回内容, format是返回该内容格式的名字)

getEncoded就是刚刚比喻到的协议的名称. 而keyspec则是协议的具体细节.

<br>

SecretKeySpec继承了两个类，说明它除了提供密钥的内容信息还有其他功能，[SecretKeySpec](https://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/SecretKeySpec.html)提到，它是简易版的钥匙工厂。

```java
//普通的对称密钥工厂类
//可生成对称和非对称密钥。
DESKeySpec desKey = new DESKeySpec(password.getBytes());
SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES");
SecretKey securekey = keyFactory.generateSecret(desKey);
```







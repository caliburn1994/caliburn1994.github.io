---
layout: post
title: 笔记 图解Java多线程设计模式
date: 2018-07-09 00:00:00
categories: 计算机
tags: 设计思想 多线程
comments: 1
---



图解Java多线程设计模式的笔记。



# 1.Single Threaded Execution模式

这一章，讲述了synchronized的用法。

synchronized的目的主要是保护一个数据集的统一性。



1）数据集应该是一个数据类。

```java
public class Gate {
    
    //...
    
    class Data {//共享资源（数据）
        private int counter = 0;
        private String name = "Nobody";
        private String address = "Nowhere";
    }
}
```

原因：时刻让程序员明白，synchronized要保护的是什么。倘若出现数据类的数据的公开方法，就应该使用synchronized进行保护。



2）存在第三方来管理共享资源？

如果是自己使用Data这种缓存的话，就不得不自身考虑数据块的完整性。那么，如果将这种缓存问题交给第三方，是不是就没有这种担忧呢？

不严谨的搜索，这种是可能的。Ehcache、Redis、数据库等均可以，但是需要考虑传输效率以及安全性。



PS : long和double操作不是原子。（嫌弃的表情）





# 2.immutable模式

immutable模式讲述数据类不可变。

不变性的重要特点就是与上下文（context）隔绝，也就是处于隔离状态。这是数据类的状态之一。

不变性也意味着依赖减少了，出现bug可能性更小了。依赖更少，某种角度来说，也可以认为多线程出错几率更小。








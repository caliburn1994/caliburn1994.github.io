---
layout: post
title: 构造函数
date: 2018-03-18 00:00:02
categories: 计算机
tags: 编程
comments: 1
---



﻿在上一家公司工作时候，遇到过一个bug，构造函数里出现了未初始化的内容导致的空指针问题，于是乎，我开始思考什么才是一个好的构造函数。

首先，我们可以从构造函数的特征出发分析分析。



# 构造函数（constructor）

1.  传入必要的参数

```java
Class Man{
  final int age;
  public Man(int age){
    this.age=age;
  }
  
  //not setter
}

```



constructor在对象的生命周期里只能有一次，而method则可以无限使用。从这个角度上来看，倘若一个参数不可以被外部更改，那就应该使用constructor，否则使用setter method。（代码角度）

constructor代表着对象的初构造状态，也就是说此时传入的参数可以看作是其身体的一部分（高聚合）。



# 讨论

## 错误1：什么东西都塞进构造函数？



1）方法类（参数问题）

i.e. 只有一个method的类。因为Java中，method不是最小颗粒度，所以任何method都要被包裹在类中。这种单一method的类，其实就仅仅是method。

**方法类，参数应该放置于method当中。**



2）耦合度过高（构造过程）

当constructor当中存在**单例模式**或者**全局变量**时候，如果出错。

原因：

1. 增加了上下文。
2. 影响因子并非一个对象。(多线程共享资源的问题)



3）赋值和操作应该分开。

方便扩展“操作”。



# 其他

迁移前原文：[小鸦 - 构造函数的反思](https://mp.csdn.net/postedit/79603769) 